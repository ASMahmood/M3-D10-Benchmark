<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="css/style.css" />

    <title>Not Netflix</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark navbarBG py-0 px-4">
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarTogglerDemo01"
        aria-controls="navbarTogglerDemo01"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
        <a class="navbar-brand" href="profile.html"
          ><img src="img/logo.png" alt="logo" style="width: 100px"
        /></a>
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
          <li class="nav-item">
            <a class="nav-link navbarText" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link navbarText" href="backoffice.html">TV Shows</a>
          </li>
          <li class="nav-item">
            <a class="nav-link navbarText" href="#">Movies</a>
          </li>
          <li class="nav-item">
            <a class="nav-link navbarText" href="#">Recently Added</a>
          </li>
          <li class="nav-item">
            <a class="nav-link navbarText" href="#">My List</a>
          </li>
        </ul>
        <div class="d-flex align-items-center">
          <div>
            <img src="img/Search-Logos.png" alt="search" style="width: 20px" />
          </div>
          <div>
            <a class="nav-link navbarTextKids" href="Settings.html">KIDS</a>
          </div>
          <div>
            <img src="img/bell.png" alt="notifications" style="width: 20px" />
          </div>
          <div>
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="navbarDropdownMenuLink"
              role="button"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <img
                src="img/user-icon.png"
                alt="user-icon"
                style="width: 32px; height: 32px"
              />
            </a>
            <div
              class="dropdown-menu genreMenu align-self-center"
              aria-labelledby="navbarDropdownMenuLink"
            >
              <a href="profile.html">Edit Profile</a>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <div class="container-fluid position-sticky">
      <div class="row">
        <div class="col-2 ml-4 my-3 pr-0">
          <h2 class="my-0">TV Shows</h2>
        </div>
        <div class="col-8 align-self-center">
          <div class="dropdown">
            <button
              class="btn dropdown-toggle genreDrop"
              type="button"
              id="dropdownMenuButton"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              Genres
            </button>
            <div
              class="dropdown-menu genreMenu"
              aria-labelledby="dropdownMenuButton"
            >
              <a class="dropdown-item genreMenuItems" href="#"
                >Action & Adventure</a
              >
              <a class="dropdown-item genreMenuItems" href="#">Anime</a>
              <a class="dropdown-item genreMenuItems" href="#">Black Stories</a>
              <a class="dropdown-item genreMenuItems" href="#">British</a>
              <a class="dropdown-item genreMenuItems" href="#">Comedies</a>
              <a class="dropdown-item genreMenuItems" href="#">Crime</a>
              <a class="dropdown-item genreMenuItems" href="#">Docuseries</a>
              <a class="dropdown-item genreMenuItems" href="#">Dramas</a>
              <a class="dropdown-item genreMenuItems" href="#">Halloween</a>
              <a class="dropdown-item genreMenuItems" href="#">History</a>
              <a class="dropdown-item genreMenuItems" href="#">Horror</a>
              <a class="dropdown-item genreMenuItems" href="#">International</a>
              <a class="dropdown-item genreMenuItems" href="#">Kids</a>
              <a class="dropdown-item genreMenuItems" href="#">Mysteries</a>
              <a class="dropdown-item genreMenuItems" href="#">Reality</a>
              <a class="dropdown-item genreMenuItems" href="#">Romance</a>
              <a class="dropdown-item genreMenuItems" href="#"
                >Sci-Fi & Fantasy</a
              >
              <a class="dropdown-item genreMenuItems" href="#"
                >Science & Nature</a
              >
              <a class="dropdown-item genreMenuItems" href="#"
                >Stand-up & Chat Shows</a
              >
              <a class="dropdown-item genreMenuItems" href="#">Teen</a>
              <a class="dropdown-item genreMenuItems" href="#">Thriller</a>
              <a class="dropdown-item genreMenuItems" href="#">US</a>
            </div>
          </div>
        </div>
        <div class="col-1 align-self-center text-right">
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-secondary layoutButton">
              =
            </button>
            <button type="button" class="btn btn-secondary layoutButton">
              ::
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid" id="body"></div>

    <footer class="page-footer font-small special-color-dark pt-4">
      <div class="container text-center text-md-left">
        <div class="container">
          <div class="row mb-3">
            <div class="col-sm-3 d-flex">
              <img
                src="img/facebook.png"
                class="mr-3"
                alt=""
                width="28px"
                height="28px"
              />
              <img
                src="img/instagram-symbol.png"
                alt=""
                class="mr-3"
                width="28px"
                height="28px"
              />
              <img
                src="img/twitter.png"
                class="mr-3"
                alt=""
                width="28px"
                height="28px"
              />
              <img
                src="img/youtube.png"
                class="mr-3"
                alt=""
                width="28px"
                height="28px"
              />
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-3 mx-auto">
            <ul class="list-unstyled">
              <li>
                <a class="footerText" href="#!">Audio and Subtitles</a>
              </li>
              <li>
                <a class="footerText" href="#!">Media Center</a>
              </li>
              <li>
                <a class="footerText" href="#!">Privacy</a>
              </li>
              <li>
                <a class="footerText" href="#!">Contact Us</a>
              </li>
            </ul>
          </div>
          <hr class="clearfix w-100 d-md-none" />
          <div class="col-md-3 mx-auto">
            <ul class="list-unstyled">
              <li>
                <a class="footerText" href="#!">Audio Description</a>
              </li>
              <li>
                <a class="footerText" href="#!">Investor Relations</a>
              </li>
              <li>
                <a class="footerText" href="#!">Legal Notices</a>
              </li>
            </ul>
          </div>
          <hr class="clearfix w-100 d-md-none" />
          <div class="col-md-3 mx-auto">
            <ul class="list-unstyled">
              <li>
                <a class="footerText" href="#!">Help Center</a>
              </li>
              <li>
                <a class="footerText" href="#!">Jobs</a>
              </li>
              <li>
                <a class="footerText" href="#!">Coockie Preferences</a>
              </li>
            </ul>
          </div>
          <hr class="clearfix w-100 d-md-none" />
          <div class="col-md-3 mx-auto">
            <ul class="list-unstyled">
              <li>
                <a class="footerText" href="#!">Gift Cards</a>
              </li>
              <li>
                <a class="footerText" href="#!">Terms og Use</a>
              </li>
              <li>
                <a class="footerText" href="#!">Corporate Informatin</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row">
          <div class="col-sm mb-2">
            <button type="button" class="btn btn-outline-primary serviceCode">
              Service Code
            </button>
          </div>
        </div>
      </div>
    </footer>

    <script>
      window.onload = async () => {
        let response = await fetch(
          "https://striveschool-api.herokuapp.com/api/movies/",
          {
            headers: {
              Authorization:
                "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFiY2ZjMDRiY2RlMTAwMTc2MTZhOTkiLCJpYXQiOjE2MDUwOTUzNjEsImV4cCI6MTYwNjMwNDk2MX0.pk0lM9kNMqL9A5UmPUWFFL7d6VIeDWrsadveoIjUNSQ",
            },
          }
        );
        let categories = await response.json();
        console.log(categories);

        let contentbody = document.querySelector("#body");

        await categories.forEach(async (category) => {
          let response2 = await fetch(
            "https://striveschool-api.herokuapp.com/api/movies/" + category,
            {
              headers: {
                Authorization:
                  "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmFiY2ZjMDRiY2RlMTAwMTc2MTZhOTkiLCJpYXQiOjE2MDUwOTUzNjEsImV4cCI6MTYwNjMwNDk2MX0.pk0lM9kNMqL9A5UmPUWFFL7d6VIeDWrsadveoIjUNSQ",
              },
            }
          );
          let movieArray = await response2.json();
          console.log(movieArray);
          let titleRow = document.createElement("div");
          titleRow.className = "row ml-5 mt-5";
          let title = document.createElement("h4");
          title.innerText = category;
          titleRow.appendChild(title);
          contentbody.appendChild(titleRow);

          let contentRow = document.createElement("div");
          contentRow.className = "row justify-content-center";
          contentbody.appendChild(contentRow);

          let carouselOuter = document.createElement("div");
          carouselOuter.className = "carousel slide";
          carouselOuter.id = `carousel${category}Indicators`;
          carouselOuter.setAttribute("data-ride", "carousel");
          contentRow.appendChild(carouselOuter);

          let carouselIndicators = document.createElement("ol");
          carouselIndicators.className = "carousel-indicators";
          carouselOuter.appendChild(carouselIndicators);

          let carouselInner = document.createElement("div");
          carouselInner.className = "carousel-inner";
          carouselOuter.appendChild(carouselInner);

          let carouselControlPrev = document.createElement("a");
          carouselControlPrev.className = "carousel-control-prev";
          carouselControlPrev.setAttribute(
            "href",
            `#carousel${category}Indicators`
          );
          carouselControlPrev.setAttribute("role", "button");
          carouselControlPrev.setAttribute("data-slide", "prev");
          carouselOuter.appendChild(carouselControlPrev);

          let prevIcon = document.createElement("span");
          prevIcon.className = "carousel-control-prev-icon";
          prevIcon.setAttribute("aria-hidden", "true");
          carouselControlPrev.appendChild(prevIcon);

          let carouselControlNext = document.createElement("a");
          carouselControlNext.className = "carousel-control-next";
          carouselControlNext.setAttribute(
            "href",
            `#carousel${category}Indicators`
          );
          carouselControlNext.setAttribute("role", "button");
          carouselControlNext.setAttribute("data-slide", "next");
          carouselOuter.appendChild(carouselControlNext);

          let nextIcon = document.createElement("span");
          nextIcon.className = "carousel-control-next-icon";
          nextIcon.setAttribute("aria-hidden", "true");
          carouselControlNext.appendChild(nextIcon);

          for (let s = 0; s < Math.ceil(movieArray.length / 6); s++) {
            let carouselIndicator = document.createElement("li");
            carouselIndicator.setAttribute(
              "data-target",
              `#carousel${category}Indicators`
            );
            carouselIndicator.setAttribute("data-slide-to", `${s}`);
            carouselIndicator.className = s === 0 ? "active" : "";
            carouselIndicators.appendChild(carouselIndicator);

            let carouselItem = document.createElement("div");
            carouselItem.className = `carousel-item ${s === 0 ? "active" : ""}`;
            carouselItem.setAttribute("data-interval", "false");
            carouselItem.setAttribute("data-pause", "hover");
            carouselInner.appendChild(carouselItem);

            let innerContainer = document.createElement("div");
            innerContainer.className = "container-fluid";
            carouselItem.appendChild(innerContainer);

            let innerRow = document.createElement("div");
            innerRow.className = "row row-cols-1 row-cols-sm-2 row-cols-md-6";
            innerContainer.appendChild(innerRow);

            for (let i = 0; i < 6; i++) {
              let newCard = document.createElement("div");
              newCard.classList.add("card", "col");
              newCard.style.maxWidth = "15vw";
              newCard.innerHTML = `<img src="${
                s > 0 ? movieArray[i + 6 * s].imageUrl : movieArray[i].imageUrl
              }" class="card-img-top" alt="...">
                                  <div class="card-body d-none">
                                    <h5 class="card-title">${
                                      s > 0
                                        ? movieArray[i + 6 * s].name
                                        : movieArray[i].name
                                    }</h5>
                                    <p class="card-text">${
                                      s > 0
                                        ? movieArray[i + 6 * s].description
                                        : movieArray[i].description
                                    }</p>
                                    <h6 class="card-text text-muted">${
                                      s > 0
                                        ? movieArray[i + 6 * s].category
                                        : movieArray[i].category
                                    }</h6>
                                  </div>`;
              innerRow.appendChild(newCard);
            }
          }
        });
      };
    </script>

    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
